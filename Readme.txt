
【代码用途】用于搭建一个供多人使用的百度旅游自动点赞系统，每天理论上最多获取财富值2500

【使用平台】新浪云 sina app engine

(我暂时不打算移植，移植的话只改动数据库那里和框架就可以了，有兴趣者可修改至BAE、JAE或GAE。遵循GPL V3协议)

【特别注意】申请应用时语言请选择Python

【关于收费】本脚本为免费软件。遵循GPL V3协议开源，禁止商业使用或修改后销售

SAE平台收费与本软件无关。注册时会送500豆子，实名认证可以再送2000,
每天的消耗应该在5豆子以内，所以基本可以免费使用。
即使用完也可以新注册一个账号，然后把应用直接转移过去。

【关于UI】楼主是HTML渣，希望有能力的童鞋能帮忙修下页面，毕竟现在的页面太凶残，HTML也是纯手敲。。
（不过这样图片、HTML就不好再放在代码里面了...部分用户可能上传会有问题）

【关于扩展】呐~一开始就是随手码的一小段自用代码，现在写的越来越大了，暂时觉得没必要集成太多功能，玩玩就够了~
也希望大家不要太丧心病狂...给那些辛苦写游记、分享照片的人留些机会。


-------------------------------------------------------------



-----------------------【联系方式】--------------------------

本脚本遵循GPL V3协议发布

Ihc（www.ihcblog.com）
ihciah@gmail.com
邮件三天不回复请重发至13307130364@fudan.edu.cn

有问题欢迎来信！



---------------------【以下是教程】--------------------------



1.请先修改config.yaml，将appid修改为你的应用id，注意冒号之后的空格不要删掉（应用id就是xxx.sinaapp.com中的xxx）
之后修改index.wsgi第11行的setpassword值（默认ihciah）。这个密码用于新增和更新你的用户cookie。没有这个密码程序将不能工作。

2.然后创建一个应用，语言选择python（SAE账号注册应该不用说吧？）

3.然后将 index.wsgi 和 config.yaml 一并压缩为ZIP文件，然后上传至SAE（或直接拷贝代码至SAE的在线在线代码编辑器）
（注意是ZIP，不是RAR；登陆至SAE后选择你新建的应用，点击代码管理，新建一个版本，上传代码包即可）

4.之后开启Mysql服务，然后浏览器打开xxx.sinaapp.com/init进行数据库的初始化操作（只需进行一次）

5.设置cookie


设置页面(xxx.sinaapp.com/set)的密码默认ihciah
[建议修改，index.wsgi第11行有定义]


和贴吧自动签到一样，本程序只保存cookie，而cookie会失效。具体失效时间自行搜索
打开xxx.sinaapp.com/set页面可以重设或新增cookie。
sid为每个用户唯一的id，更新cookie时需要此sid，可以随意设置，但请记住，更新时需要提供这个，建议只使用英文和数字，且在四位以上。（知道你SID的人虽然不能获取你的cookie，但可以覆盖掉你的设置）
cookie需定期手动更新。
打开首页会显示cookie失效的用户列表，显示sid前四位。

6.本应用有两种工作模式，safe mode每天获取750点，基本没有封号风险
  greedy mode每天2000点，有封号风险
  
  还有是否收藏游记选项。如果你会用到百度旅游的收藏功能，请不要开启，否则会让你的百度旅游账号收藏夹乱掉 

  请自行斟酌。



---------------------------------------------------------------

【TIP】：
可多刷几个百度账号（斜眼笑），但如果系统账号数超过18个请修改config.yaml里的计划任务，否则无法刷完
如果不到就不要改了，改了会多消耗资源。
修改方法邮件问我或者去找SAE的帮助文档。

如果账号数非常多可以联系我，我会修改为Cron+Taskqueue模式，理论上无上限。


---------------------【如何获取cookie】------------------------

见/set页面说明

Cookie格式像这样(其实只需要有关键的几项就够了)：

HMACCOUNT=EE7823421DWCE1; BAIDUID=893165EDQWFWQF213215905F223424:FG=1; BAIDU_WISE_UID=wapp_13941231390_446; Hm_lvt_f4165dfug3i4g2ifse6few70a6bd243=1393233964,1396627467; BDUSS=NCV2pkZjZCeGZnN2VmNWc2Z1N6VHBJN25MNXBTQllsTDBuRy0tVDWQFWfewfwFEWFWEBJCQAAAAAAAADWQEFW#44w5gtaWhjaWFoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANREWFEWFEWW; MCITY=-%3A; cflag=65535%3A1


（各大云签到都有教哦，但要注意格式，这个使用的cookie是带着键名的）



---------------------更新log-------------------------

2014-4-9

闲的无聊写了第一版

2014-4-10

更新了下，修复了重复点赞计数BUG，稍微防了下SQL注入，增加了主页提示，写了这个较为完善的帮助
最后一点电量，码点字。。更新了下代码，不用手动插入数据了。
不调试就传代码乃罪过也。。。

新增功能：识别cookie错误用户，并在主页予以提示，且可防止浪费资源(滚去做模电作业了5555555)

又来码了段代码，不需要之前的导入数据库这种麻烦操作了~直接执行/init就可以了
增加了SQL注入关键字检测，安全了点
呐，基本上完善了吧（[阴险]要不要加个自动评论功能？一次50点财富值的说）

谁有什么改进建议欢迎发邮件给我~窝继续补作业>_<

2014-4-11
V2.0
添加作死模式，支持获取以前的三倍财富值
添加检测更新和版本功能
首页写成了完整的HTML并写成了中文

V2.1
发现评论的每天上限是25，改进作死模式，每天再多250点

V2.2
Bug Fixed

V2.3
窝竟然过滤了分号！好吧，再修个BUG...
看见大家都改成了greedy mode，就把这个作为默认吧~
顺便增加个简易的获取cookie方法

V2.4
更新服务器传输格式部分采用Json，可根据现有版本获取更新细节
现在大毛病应该没有了吧？

V2.5
javascript方法获取cookie和实际好像有出入，删掉了这种的说明
shua页面增加Fatal Error详细信息
修正更新脚本try-except语句，调试时的if 1忘了改了
界面优化：添加设置页面的标题，修正单次拼写错误，添加多个返回链接
首页新增调试工具
修正随机选择id的逻辑缺陷

V2.6
23点50分写成了50点23分，导致config.yaml不能正确上传。
这样每20分钟自动执行的/shua也不能执行了。
发个更新修复下，务必把config.yaml也更新了！更新前请修改里面的appid！

V2.6-2
好多人计划任务没有正确配置，或者是需要检查代码是否正常工作
所以新增了一个总进度显示，加上时间判断，提醒大家这个问题
版本号没变，不用再麻烦大家更新了，新用户下载到的是新版本

V2.7
将mode设置独立，每个账号可以拥有独立偏好设定，代码内的开关选项删掉了
新增收藏游记功能，最多每天可多500财富值（可选开启）
新增关注功能，每天可多获得250财富值（默认开启，未设置选项）
鉴于百度将之前默认回复的财富值取消了，现在手动提交了同样的句子，财富值又能拿到了
【贪婪模式被封杀几率大大增加！】